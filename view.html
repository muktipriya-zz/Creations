<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.4/cyborg/bootstrap.min.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="demo.css">
    <script  type="text/javascript" src="d3.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="highcharts.js"></script>
    <script type="text/javascript" src="exporting.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.0-rc2/js/bootstrap.min.js"></script>
    <script src="jquery.tablesorter.min.js"></script>
    <title>Weekly Update</title>
</head>
<body>
<br>
<br>
<br>
<br>
<div class="thumbnail col-sm-6" id="container" style="height: 50%"></div>
<br>
<br>
<!--code to implement line chart-->
<script>
    var data = [
        {key: "Banking",   value: 132},
        {key: "C.A",       value: 71},
        {key: "I.T",	   value: 337},
        {key: "Others",	   value: 93}
    ];
    var w = 500;
    var h = 400;
    var margin = {
        top: 58,
        bottom: 100,
        left: 80,
        right: 40
    };
    var width = w - margin.left - margin.right;
    var height = h - margin.top - margin.bottom;

    var x = d3.scale.ordinal()
            .domain(data.map(function(entry){
                return entry.key;
            }))
            .rangeBands([0, width]);
    var y = d3.scale.linear()
            .domain([0, d3.max(data, function(d){
                return d.value;
            })])
            .range([height, 0]);
    var ordinalColorScale = d3.scale.category20();
    var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");
    var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");
    var yGridlines = d3.svg.axis()
            .scale(y)
            .tickSize(-width,0,0)
            .tickFormat("")
            .orient("left");
    var svg = d3.select("body").append("svg")
            .attr("id", "chart")
            .attr("width", w)
            .attr("height", h);
    var chart = svg.append("g")
            .classed("display", true)
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    var controls = d3.select("body")
            .append("div")
            .attr("id", "controls")
            .attr("class", "pull-right");
    var sort_btn = controls.append("button")
            .html("Sort data: ascending")
            .attr("state", 0);
    function drawAxis(params){
        if(params.initialize === true){
            //Draw the gridlines and axes
            //Draw the gridlines
            this.append("g")
                    .call(params.gridlines)
                    .classed("gridline", true)
                    .attr("transform", "translate(0,0)")
            //This is the x axis
            this.append("g")
                    .classed("x axis", true)
                    .attr("transform", "translate(" + 0 + "," + height + ")")
                    .call(params.axis.x)
                    .selectAll("text")
                    .classed("x-axis-label", true)
                    .style("text-anchor", "end")
                    .attr("dx", -8)
                    .attr("dy", 8)
                    .attr("transform", "translate(0,0) rotate(-45)");
            //This is the y axis
            this.append("g")
                    .classed("y axis", true)
                    .attr("transform", "translate(0,0)")
                    .call(params.axis.y);00
            //This is the y label
            this.select(".y.axis")
                    .append("text")
                    .attr("x", 0)
                    .attr("y", 0)
                    .style("text-anchor", "middle")
                    .attr("transform", "translate(-50," + height/2 + ") rotate(-90)")
                    .text("Call Counts");
            //This is the x label
            this.select(".x.axis")
                    .append("text")
                    .attr("x", 0)
                    .attr("y", 0)
                    .style("text-anchor", "middle")
                    .attr("transform", "translate(" + width/2 + ",80)")
                    .text("Sector");
        } else if(params.initialize === false){
            //Update info
            this.selectAll("g.x.axis")
                    .transition()
                    .duration(500)
                    .ease("bounce")
                    .delay(500)
                    .call(params.axis.x);
            this.selectAll(".x-axis-label")
                    .style("text-anchor", "end")
                    .attr("dx", -8)
                    .attr("dy", 8)
                    .attr("transform", "translate(0,0) rotate(-45)");
            this.selectAll("g.y.axis")
                    .transition()
                    .duration(500)
                    .ease("bounce")
                    .delay(500)
                    .call(params.axis.y);
        }
    }
    function plot(params){
        x.domain(data.map(function(entry){
            return entry.key;
        }));
        y.domain([0, d3.max(data, function(d){
            return d.value;
        })]);

        //Draw the axes and axes labels
        drawAxis.call(this, params);

        //enter()
        this.selectAll(".bar")
                .data(params.data)
                .enter()
                .append("rect")
                .classed("bar", true)
                .on("mouseover", function(d,i){
                    d3.select(this).style("fill", "yellow");
                })
                .on("mousemove", function(d,i){

                })
                .on("mouseout", function(d,i){
                    d3.select(this).style("fill", ordinalColorScale(i));
                });

        this.selectAll(".bar-label")
                .data(params.data)
                .enter()
                .append("text")
                .classed("bar-label", true);

        //update
        this.selectAll(".bar")
                .transition()
                .attr("x", function(d,i){
                    return x(d.key);
                })
                .attr("y", function(d,i){
                    return y(d.value);
                })
                .attr("height", function(d,i){
                    return height - y(d.value);
                })
                .attr("width", function(d){
                    return x.rangeBand();
                })
                .style("fill", function(d,i){
                    return ordinalColorScale(i);
                });

        this.selectAll(".bar-label")
                .transition()
                .attr("x", function(d,i){
                    return x(d.key) + (x.rangeBand()/2)
                })
                .attr("dx", 0)
                .attr("y", function(d,i){
                    return y(d.value);
                })
                .attr("dy", -6)
                .text(function(d){
                    return d.value;
                })

        //exit()
        this.selectAll(".bar")
                .data(params.data)
                .exit()
                .remove();

        this.selectAll(".bar-label")
                .data(params.data)
                .exit()
                .remove();
    }
    sort_btn.on("click", function(){
        var self = d3.select(this);
        var ascending = function(a,b){
            return a.value - b.value;
        };
        var descending = function(a,b){
            return b.value - a.value;
        }
        var state = +self.attr("state");
        var txt = "Sort data: ";
        if(state === 0){
            data.sort(ascending);
            state = 1;
            txt += "descending";
        } else if(state === 1){
            data.sort(descending);
            state = 0;
            txt += "ascending";
        }
        self.attr("state", state);
        self.html(txt);

        plot.call(chart, {
            data: data,
            axis:{
                x: xAxis,
                y: yAxis
            },
            gridlines: yGridlines,
            initialize: false
        });
    });
    plot.call(chart, {
        data: data,
        axis:{
            x: xAxis,
            y: yAxis
        },
        gridlines: yGridlines,
        initialize: true
    });
</script>
<!--code implementing line chart-->
<script type="text/javascript">
    $(function () {
        $('#container').highcharts({
            title: {
                text: '',
                x: -20 //center
            },
            subtitle: {
                text: '',
                x: -20
            },
            xAxis: {
                categories: ['9', '10', '11', '12', '1', '3',
                    '4', '5', '6', '7']
            },
            yAxis: {
                title: {
                    text: 'Call Count'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                valueSuffix: 'Calls'
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [{
                name: 'C.A',
                color: '#0000FF',
                data: [10, 15, 13, 11, 20, 35, 40, 45, 50, 55]
            },
                {
                    name: 'Banking',
                    color: '#FFA500',
                    data: [10, 9, 8, 12, 23, 19, 24, 20, 10, 3]
                }, {
                    name: 'Others',
                    color: '#00FF00',
                    data: [10, 05, 10, 15, 20, 25, 30, 35, 40, 45]
                }]
        });
    });
</script>
<style>
    body,html{
        margin: 0;
        padding: 0;
        font-family: "Arial", sans-serif;
        font-size: 0.95em;
        text-align: center;
        fill: white;
    }
    #chart{
        background-color: #000000;
        border: 1px solid #000;
        fill:white;
    }
    .thumbnail{
       background-color: rgba(0,0,0,1.0);
        border: #000000;
    }
    #controls{
    color: #3765f5;
    fill:black;

    }
    .bar{
        fill: purple;
        shape-rendering: crispEdges;
    }
    .bar-label{
        fill: white;
        text-anchor: middle;
        font-size: 18px;
    }
    .axis path,
    .axis line{
        fill: none;
        stroke: white;
        shape-rendering: crispEdges;
    }
    .gridline path,
    .gridline line{
        fill: none;
        stroke: #ccc;
        shape-rendering: crispEdges;}
</style>
<style>
    .highcharts-background{   
        fill:black;
    }
</style>
    <!--This script is to sort the table -->
    <script>
    $(document).ready(function(){
    $(function(){
    $("#myTable1").tablesorter();
    $("#myTable2").tablesorter();
    $("#myTable3").tablesorter();
    $("#myTable4").tablesorter();
    $("#myTable5").tablesorter();
    });
    });
    </script>
    <style type="text/css">
        ${demo.css}
    </style>
<br>
<br>
<br>
<div class="row">
    <!-- Code for second table to show in with col-sm-4 -->
    <div class="col-sm-4">
        <h3 class="text-center" style="color:goldenrod;">C.A</h3>
        <table id="myTable2" class="table tablesorter table-responsive table-bordered">
            <thead>
            <tr>
                <th style="color: blueviolet;" class="text-center">Name</th>
                <th style="color: #77b300;" class="text-center">Call Count</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>Jay</td><td>3</td></tr>
            <tr><td>Vishal</td><td>10</td></tr>
            <tr><td>Noble</td><td>19</td></tr>
            <tr><td>Dhruv</td><td>13</td></tr>
            <tr><td>Ashwin</td><td>13</td></tr>
            <tr><td>Rani</td><td>15</td></tr>
            <tr><td>Mukti</td><td>13</td></tr>
            </tbody>
        </table>
    </div>
    <div class="col-sm-4">
    <h3 class="text-center" style="color:goldenrod;">Banking</h3>
        <table id="myTable3" class="table tablesorter table-responsive table-bordered">
            <thead>
            <tr>
                <th style="color: blueviolet;" class="text-center">Name</th>
                <th style="color: #77b300;" class="text-center">Call Count</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>Jay</td><td>3</td></tr>
            <tr><td>Vishal</td><td>10</td></tr>
            <tr><td>Noble</td><td>19</td></tr>
            <tr><td>Dhruv</td><td>13</td></tr>
            <tr><td>Ashwin</td><td>13</td></tr>
            <tr><td>Rani</td><td>15</td></tr>
            <tr><td>Mukti</td><td>13</td></tr>
            </tbody>
        </table>
    </div>
    <div class="col-sm-4">
    <h3 class="text-center" style="color:goldenrod;">Others</h3>
        <table id="myTable4" class="table tablesorter table-responsive table-bordered">
            <thead>
            <tr>
            <th style="color: blueviolet;" class="text-center">Name</th>
            <th style="color: #77b300;" class="text-center">Call Count</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>Jay</td><td>3</td></tr>
            <tr><td>Vishal</td><td>10</td></tr>
            <tr><td>Noble</td><td>19</td></tr>
            <tr><td>Dhruv</td><td>13</td></tr>
            <tr><td>Ashwin</td><td>13</td></tr>
            <tr><td>Rani</td><td>15</td></tr>
            <tr><td>Mukti</td><td>13</td></tr>
            </tbody>
        </table>
    </div>
</div>
<br>
<br>
<!-- weekly update table -->
<div class="col-sm-offset-3  col-sm-6">
<h3 class="text-center" style="color:#9933cc;">Weekly Update</h3>
    <table id="myTable5" class="table tablesorter table-responsive table-bordered">
        <thead>
            <tr>
                <th style="color: gold;" class="text-center">Name</th>
                <th style="color: darkturquoise;" class="text-center">Monday</th>
                <th style="color: goldenrod;" class="text-center">Tuesday</th>
                <th style="color: chocolate;" class="text-center">Wednesday</th>
                <th style="color: palevioletred;" class="text-center">Thursday</th>
                <th style="color: forestgreen;" class="text-center">Friday</th>
                <th style="color: red;" class="text-center">Total</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Rani</td><td>1</td><td>3</td><td>13</td><td>1</td><td>3</td><td>30</td></tr>
            <tr><td>Mukti</td><td>49</td><td>10</td><td>10</td><td>1</td><td>3</td><td>38</td></tr>
            <tr><td>Jay</td><td>50</td><td>19</td><td>12</td><td>1</td><td>3</td><td>39</td></tr>
            <tr><td>Vishal</td><td>80</td><td>13</td><td>11</td><td>1</td><td>3</td><td>78</td></tr>
            <tr><td>JAfeel</td><td>85</td><td>13</td><td>10</td><td>1</td><td>3</td><td>65</td></tr>
            <tr><td>Dhruv</td><td>86</td><td>15</td><td>10</td><td>1</td><td>3</td><td>05</td></tr>
            <tr><td>Noble</td><td>97</td><td>13</td><td>11</td><td>1</td><td>3</td><td>39</td></tr>
        </tbody>
    </table>
</div>
<br>
<br>
<br>
<script type="text/javascript">
   setTimeout(function(){
   window.location.reload(1);
}, 150000);
</script>
</body>
</html>







